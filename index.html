<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>View Blogs</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/npm/lucide@0.44.0/dist/css/lucide.min.css" rel="stylesheet" />
    <style>
        /* Custom styles for ShadCN New York theme */
        body {
            background-color: #1c1c1e;
            color: #f9f9f9;
            font-family: "Inter", sans-serif;
        }
        .timeline::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #f9f9f9;
            transform: translateX(-50%);
        }
        .timeline-entry::before {
            content: '';
            position: absolute;
            top: 0.75rem;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            background: #f9f9f9;
            border: 2px solid #1c1c1e;
            transform: translateX(-200%);
        }
        .content {
            display: none;
        }
        .title i {
            transition: transform 0.2s;
        }
        .title.collapsed i {
            transform: rotate(-90deg);
        }
    </style>
</head>
<body class="font-sans antialiased py-10">
    <div class="container mx-auto p-6">
	<header class='max-w-lg mx-auto text-4xl font-bold mb-10'>timeline</header>

<section id="blogEntries" class="relative timeline max-w-lg mx-auto"></section>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch("https://blog-h96d.onrender.com/blogs")
                .then((response) => response.json())
                .then((blogs) => {
                    const blogEntries = document.getElementById("blogEntries");

                    blogs.forEach((blog) => {
                        const entry = document.createElement("div");
                        entry.className = "timeline-entry relative mb-8 pl-6";
                        entry.innerHTML = `
                        <div>
                            <p class="italic text-xs mb-1">${new Date(blog.date).toLocaleString()}</p>
                            <h3 class="text-xl font-semibold title collapsed cursor-pointer flex items-center">
                                ${blog.title} <i class="lucide lucide-chevron-right ml-2"></i>
                            </h3>
                            <div class="content mt-2">${blog.content}</div>
                        </div>
                    `;
                        blogEntries.appendChild(entry);
                    });

                    const titles = document.querySelectorAll(".title");
                    titles.forEach((title) => {
                        title.addEventListener("click", function () {
                            const content = this.nextElementSibling;
                            const icon = this.querySelector("i");
                            if (content.style.display === "none" || content.style.display === "") {
                                content.style.display = "block";
                                icon.classList.remove("lucide-chevron-right");
                                icon.classList.add("lucide-chevron-down");
                            } else {
                                content.style.display = "none";
                                icon.classList.remove("lucide-chevron-down");
                                icon.classList.add("lucide-chevron-right");
                            }
                        });
                    });
                })
                .catch((error) => console.error("Error:", error));
        });
    </script>
</body>
</html>
